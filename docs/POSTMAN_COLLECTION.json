{
  "info": {
    "name": "Nigerian Real Estate Scraper API",
    "description": "Complete API collection for the Nigerian Real Estate Scraper with 58 endpoints across 16 categories. Supports 82+ data sources with unlimited scalability. Includes Firestore queries, advanced exports, scheduled scraping, and GitHub Actions integration.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "2.2.0"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:5000/api",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "1. Health Check",
      "item": [
        {
          "name": "API Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": ["{{base_url}}"],
              "path": ["health"]
            },
            "description": "Check if API server is running"
          }
        }
      ]
    },
    {
      "name": "2. Scraping Management",
      "item": [
        {
          "name": "Start Scraping",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sites\": [\"npc\", \"propertypro\"],\n  \"max_pages\": 10,\n  \"geocoding\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/scrape/start",
              "host": ["{{base_url}}"],
              "path": ["scrape", "start"]
            },
            "description": "Start scraping for selected sites"
          }
        },
        {
          "name": "Get Scraping Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/scrape/status",
              "host": ["{{base_url}}"],
              "path": ["scrape", "status"]
            },
            "description": "Get current scraping status and progress"
          }
        },
        {
          "name": "Stop Scraping",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/scrape/stop",
              "host": ["{{base_url}}"],
              "path": ["scrape", "stop"]
            },
            "description": "Stop current scraping process"
          }
        },
        {
          "name": "Get Scraping History",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/scrape/history?limit=10",
              "host": ["{{base_url}}"],
              "path": ["scrape", "history"],
              "query": [{"key": "limit", "value": "10"}]
            },
            "description": "Get scraping history"
          }
        }
      ]
    },
    {
      "name": "3. Site Configuration",
      "item": [
        {
          "name": "List All Sites",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sites",
              "host": ["{{base_url}}"],
              "path": ["sites"]
            },
            "description": "Get all configured sites (82+)"
          }
        },
        {
          "name": "Get Specific Site",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sites/npc",
              "host": ["{{base_url}}"],
              "path": ["sites", "npc"]
            },
            "description": "Get configuration for specific site"
          }
        },
        {
          "name": "Add New Site",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"key\": \"newsite\",\n  \"name\": \"New Property Site\",\n  \"url\": \"https://newsite.com\",\n  \"enabled\": true,\n  \"parser\": \"specials\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/sites",
              "host": ["{{base_url}}"],
              "path": ["sites"]
            },
            "description": "Add new site to config.yaml"
          }
        },
        {
          "name": "Update Site",
          "request": {
            "method": "PUT",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"enabled\": false,\n  \"max_pages\": 50\n}"
            },
            "url": {
              "raw": "{{base_url}}/sites/npc",
              "host": ["{{base_url}}"],
              "path": ["sites", "npc"]
            },
            "description": "Update site configuration"
          }
        },
        {
          "name": "Delete Site",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sites/oldsite",
              "host": ["{{base_url}}"],
              "path": ["sites", "oldsite"]
            },
            "description": "Remove site from configuration"
          }
        },
        {
          "name": "Toggle Site Enable/Disable",
          "request": {
            "method": "PATCH",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"enabled\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/sites/npc/toggle",
              "host": ["{{base_url}}"],
              "path": ["sites", "npc", "toggle"]
            },
            "description": "Enable or disable a site"
          }
        }
      ]
    },
    {
      "name": "4. Data Query",
      "item": [
        {
          "name": "List Data Files",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/data/sites",
              "host": ["{{base_url}}"],
              "path": ["data", "sites"]
            },
            "description": "List all available site data files"
          }
        },
        {
          "name": "Get Site Data",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/data/sites/npc?limit=50&offset=0",
              "host": ["{{base_url}}"],
              "path": ["data", "sites", "npc"],
              "query": [
                {"key": "limit", "value": "50"},
                {"key": "offset", "value": "0"}
              ]
            },
            "description": "Get data for specific site with pagination"
          }
        },
        {
          "name": "Get Master Workbook",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/data/master?limit=100&offset=0",
              "host": ["{{base_url}}"],
              "path": ["data", "master"],
              "query": [
                {"key": "limit", "value": "100"},
                {"key": "offset", "value": "0"}
              ]
            },
            "description": "Get all properties from master workbook"
          }
        },
        {
          "name": "Search Data",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/data/search?q=Lekki&limit=50",
              "host": ["{{base_url}}"],
              "path": ["data", "search"],
              "query": [
                {"key": "q", "value": "Lekki"},
                {"key": "limit", "value": "50"}
              ]
            },
            "description": "Full-text search across all data"
          }
        },
        {
          "name": "Advanced Query",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"filters\": {\n    \"bedrooms\": {\"gte\": 3},\n    \"price\": {\"lte\": 30000000},\n    \"location\": {\"contains\": \"Lekki\"},\n    \"property_type\": {\"contains\": \"Flat\"}\n  },\n  \"sort\": {\"field\": \"price\", \"order\": \"asc\"},\n  \"limit\": 50,\n  \"offset\": 0\n}"
            },
            "url": {
              "raw": "{{base_url}}/query",
              "host": ["{{base_url}}"],
              "path": ["query"]
            },
            "description": "Advanced filtering with complex queries"
          }
        },
        {
          "name": "Query Summary",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/query/summary",
              "host": ["{{base_url}}"],
              "path": ["query", "summary"]
            },
            "description": "Get summary statistics for queries"
          }
        }
      ]
    },
    {
      "name": "5. Natural Language Search",
      "item": [
        {
          "name": "Natural Language Search",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"3 bedroom flat in Lekki under 30 million\",\n  \"limit\": 50\n}"
            },
            "url": {
              "raw": "{{base_url}}/search/natural",
              "host": ["{{base_url}}"],
              "path": ["search", "natural"]
            },
            "description": "Search using plain English queries"
          }
        },
        {
          "name": "Get Search Suggestions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/search/suggestions?q=3 bed",
              "host": ["{{base_url}}"],
              "path": ["search", "suggestions"],
              "query": [{"key": "q", "value": "3 bed"}]
            },
            "description": "Get auto-complete suggestions for searches"
          }
        }
      ]
    },
    {
      "name": "6. Price History",
      "item": [
        {
          "name": "Get Price History",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/price-history/hash_abc123",
              "host": ["{{base_url}}"],
              "path": ["price-history", "hash_abc123"]
            },
            "description": "Get price history for specific property"
          }
        },
        {
          "name": "Get Price Drops",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/price-drops?min_drop_pct=10&days=30",
              "host": ["{{base_url}}"],
              "path": ["price-drops"],
              "query": [
                {"key": "min_drop_pct", "value": "10"},
                {"key": "days", "value": "30"}
              ]
            },
            "description": "Get properties with recent price reductions"
          }
        },
        {
          "name": "Get Stale Listings",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/stale-listings?min_days=90",
              "host": ["{{base_url}}"],
              "path": ["stale-listings"],
              "query": [{"key": "min_days", "value": "90"}]
            },
            "description": "Get listings that haven't sold in X days"
          }
        },
        {
          "name": "Get Market Trends",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/market-trends?days=30&location=Lekki",
              "host": ["{{base_url}}"],
              "path": ["market-trends"],
              "query": [
                {"key": "days", "value": "30"},
                {"key": "location", "value": "Lekki"}
              ]
            },
            "description": "Get market trend analysis"
          }
        }
      ]
    },
    {
      "name": "7. Saved Searches",
      "item": [
        {
          "name": "List Saved Searches",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/searches?user_id=user123",
              "host": ["{{base_url}}"],
              "path": ["searches"],
              "query": [{"key": "user_id", "value": "user123"}]
            },
            "description": "Get all saved searches for a user"
          }
        },
        {
          "name": "Create Saved Search",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": \"user123\",\n  \"name\": \"Lekki Flats\",\n  \"criteria\": {\n    \"bedrooms\": {\"gte\": 3},\n    \"location\": {\"contains\": \"Lekki\"},\n    \"price\": {\"lte\": 30000000}\n  },\n  \"alert_frequency\": \"daily\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/searches",
              "host": ["{{base_url}}"],
              "path": ["searches"]
            },
            "description": "Save a new search with alert settings"
          }
        },
        {
          "name": "Get Saved Search",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/searches/search_id_123",
              "host": ["{{base_url}}"],
              "path": ["searches", "search_id_123"]
            },
            "description": "Get specific saved search details"
          }
        },
        {
          "name": "Update Saved Search",
          "request": {
            "method": "PUT",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Lekki Flats\",\n  \"alert_frequency\": \"weekly\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/searches/search_id_123",
              "host": ["{{base_url}}"],
              "path": ["searches", "search_id_123"]
            },
            "description": "Update saved search settings"
          }
        },
        {
          "name": "Delete Saved Search",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/searches/search_id_123",
              "host": ["{{base_url}}"],
              "path": ["searches", "search_id_123"]
            },
            "description": "Delete a saved search"
          }
        },
        {
          "name": "Get Search Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/searches/search_id_123/stats",
              "host": ["{{base_url}}"],
              "path": ["searches", "search_id_123", "stats"]
            },
            "description": "Get statistics for a saved search"
          }
        }
      ]
    },
    {
      "name": "8. Health Monitoring",
      "item": [
        {
          "name": "Overall Health",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health/overall?days=7",
              "host": ["{{base_url}}"],
              "path": ["health", "overall"],
              "query": [{"key": "days", "value": "7"}]
            },
            "description": "Get overall system health status"
          }
        },
        {
          "name": "Site Health",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health/sites/npc?days=7",
              "host": ["{{base_url}}"],
              "path": ["health", "sites", "npc"],
              "query": [{"key": "days", "value": "7"}]
            },
            "description": "Get health status for specific site"
          }
        },
        {
          "name": "Get Active Alerts",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health/alerts",
              "host": ["{{base_url}}"],
              "path": ["health", "alerts"]
            },
            "description": "Get active health alerts"
          }
        },
        {
          "name": "Top Performers",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health/top-performers?days=7&limit=10",
              "host": ["{{base_url}}"],
              "path": ["health", "top-performers"],
              "query": [
                {"key": "days", "value": "7"},
                {"key": "limit", "value": "10"}
              ]
            },
            "description": "Get top performing sites"
          }
        }
      ]
    },
    {
      "name": "9. Quality & Duplicates",
      "item": [
        {
          "name": "Detect Duplicates",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"listings\": [\n    {\"title\": \"3 Bedroom Flat\", \"location\": \"Lekki\", \"price\": 25000000},\n    {\"title\": \"3BR Apartment\", \"location\": \"Lekki Ph1\", \"price\": 25000000}\n  ],\n  \"threshold\": 0.85\n}"
            },
            "url": {
              "raw": "{{base_url}}/duplicates/detect",
              "host": ["{{base_url}}"],
              "path": ["duplicates", "detect"]
            },
            "description": "Detect duplicate listings using AI fuzzy matching"
          }
        },
        {
          "name": "Score Data Quality",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"listings\": [\n    {\n      \"title\": \"3 Bedroom Flat\",\n      \"price\": 25000000,\n      \"location\": \"Lekki\",\n      \"listing_url\": \"https://example.com/1\",\n      \"bedrooms\": 3,\n      \"images\": [\"img1.jpg\"]\n    }\n  ],\n  \"min_score\": 80\n}"
            },
            "url": {
              "raw": "{{base_url}}/quality/score",
              "host": ["{{base_url}}"],
              "path": ["quality", "score"]
            },
            "description": "Score listings quality (1-100%)"
          }
        }
      ]
    },
    {
      "name": "10. Logs & Statistics",
      "item": [
        {
          "name": "Get Logs",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/logs?limit=100&level=INFO",
              "host": ["{{base_url}}"],
              "path": ["logs"],
              "query": [
                {"key": "limit", "value": "100"},
                {"key": "level", "value": "INFO"}
              ]
            },
            "description": "Get application logs"
          }
        },
        {
          "name": "Get Error Logs",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/logs/errors?limit=50",
              "host": ["{{base_url}}"],
              "path": ["logs", "errors"],
              "query": [{"key": "limit", "value": "50"}]
            },
            "description": "Get error logs only"
          }
        },
        {
          "name": "Get Site Logs",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/logs/site/npc?limit=50",
              "host": ["{{base_url}}"],
              "path": ["logs", "site", "npc"],
              "query": [{"key": "limit", "value": "50"}]
            },
            "description": "Get logs for specific site"
          }
        },
        {
          "name": "Overview Statistics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/stats/overview",
              "host": ["{{base_url}}"],
              "path": ["stats", "overview"]
            },
            "description": "Get overview statistics"
          }
        },
        {
          "name": "Per-Site Statistics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/stats/sites",
              "host": ["{{base_url}}"],
              "path": ["stats", "sites"]
            },
            "description": "Get statistics for each site"
          }
        },
        {
          "name": "Trend Analysis",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/stats/trends?days=7",
              "host": ["{{base_url}}"],
              "path": ["stats", "trends"],
              "query": [{"key": "days", "value": "7"}]
            },
            "description": "Get trend analysis over time"
          }
        }
      ]
    },
    {
      "name": "11. Utilities",
      "item": [
        {
          "name": "Validate Single URL",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"url\": \"https://nigeriapropertycentre.com/for-sale/flats-apartments/lagos/lekki\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/validate/url",
              "host": ["{{base_url}}"],
              "path": ["validate", "url"]
            },
            "description": "Validate single URL"
          }
        },
        {
          "name": "Validate Multiple URLs",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"urls\": [\n    \"https://nigeriapropertycentre.com/for-sale/flats\",\n    \"https://propertypro.ng/property-for-sale\"\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/validate/urls",
              "host": ["{{base_url}}"],
              "path": ["validate", "urls"]
            },
            "description": "Validate multiple URLs"
          }
        },
        {
          "name": "Filter by Location",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"listings\": [\n    {\"location\": \"Lekki, Lagos\"},\n    {\"location\": \"Abuja\"},\n    {\"location\": \"Ikeja, Lagos\"}\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/filter/location",
              "host": ["{{base_url}}"],
              "path": ["filter", "location"]
            },
            "description": "Filter listings by Lagos location"
          }
        },
        {
          "name": "Location Filter Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/filter/stats",
              "host": ["{{base_url}}"],
              "path": ["filter", "stats"]
            },
            "description": "Get location filter statistics"
          }
        },
        {
          "name": "Check Rate Limit",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"site_key\": \"npc\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/rate-limit/check",
              "host": ["{{base_url}}"],
              "path": ["rate-limit", "check"]
            },
            "description": "Check if can make request to site"
          }
        },
        {
          "name": "Rate Limit Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/rate-limit/status",
              "host": ["{{base_url}}"],
              "path": ["rate-limit", "status"]
            },
            "description": "Get rate limit status for all sites"
          }
        }
      ]
    },
    {
      "name": "12. GitHub Actions Integration",
      "item": [
        {
          "name": "Trigger Scraper Workflow",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"page_cap\": 20,\n  \"geocode\": 1,\n  \"sites\": [\"npc\", \"propertypro\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/github/trigger-scrape",
              "host": ["{{base_url}}"],
              "path": ["github", "trigger-scrape"]
            },
            "description": "Trigger GitHub Actions workflow for serverless scraping. Requires GITHUB_TOKEN, GITHUB_OWNER, and GITHUB_REPO environment variables."
          }
        },
        {
          "name": "Get Workflow Runs",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/github/workflow-runs?per_page=5",
              "host": ["{{base_url}}"],
              "path": ["github", "workflow-runs"],
              "query": [
                {"key": "per_page", "value": "5", "description": "Number of runs to return (max 100)"}
              ]
            },
            "description": "Get recent GitHub Actions workflow runs with status and conclusion"
          }
        },
        {
          "name": "Get Artifacts",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/github/artifacts?per_page=10",
              "host": ["{{base_url}}"],
              "path": ["github", "artifacts"],
              "query": [
                {"key": "per_page", "value": "10", "description": "Number of artifacts to return (max 100)"}
              ]
            },
            "description": "List available scraped data artifacts from GitHub Actions runs"
          }
        },
        {
          "name": "Get Artifact Download URL",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/github/artifact/123456/download",
              "host": ["{{base_url}}"],
              "path": ["github", "artifact", "123456", "download"]
            },
            "description": "Get download URL for a specific artifact. Replace 123456 with actual artifact ID."
          }
        }
      ]
    }
  ]
}
